# --- Required (set via Dashboard > Edge Functions > Secrets) ---
OPENAI_API_KEY=YOUR_OPENAI_KEY

# These three names may be rejected by the CLI (reserved SUPABASE_*). 
# If CLI skips them, set them in the Dashboard UI instead.
SUPABASE_URL=https://ymjnholeztepjnbcbjcr.supabase.co
SUPABASE_SERVICE_ROLE_KEY=YOUR_SERVICE_ROLE_KEY
SUPABASE_ANON_KEY=YOUR_ANON_PUBLIC_KEY

# Allowlist: tables the agent may query (add/remove freely)
OPS_TABLES_JSON=[
  "breakdown_ticket",
  "pm_occurrence",
  "work_order",
  "work_order_comment",
  "equipment_master",
  "part_master",
  "part_txn",
  "part_location",
  "vendors",
  "purchase_orders",
  "purchase_order_lines",
  "products",
  "product_bom",
  "product_bom_versions",
  "product_bom_version_lines",
  "label_master",
  "checklist_master",
  "training_session",
  "training_participant",
  "attendance",
  "attendance_punch",
  "shift_schedule",
  "users",
  "profiles"
]

# Optional: router hints (kept minimalâ€”tools handle the rest)
OPS_CONFIG_JSON={
  "pm": {
    "table": "pm_occurrence",
    "cols": {
      "equipment": "work_order_uid",
      "due_date": "scheduled_for",
      "status": "status"
    }
  },
  "breakdowns": {
    "table": "breakdown_ticket",
    "cols": {
      "equipment": "equipment",          # <-- adjust if named differently
      "reason": "reason",                # <-- adjust
      "status": "status",                # <-- adjust
      "started_at": "created_at",        # <-- adjust
      "ended_at": "closed_at"            # <-- adjust or remove
    }
  }
}

# Optional: force callers to send Authorization: Bearer <ANON>
# REQUIRE_ANON=true
